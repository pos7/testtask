
Задание:
взято от сюда: https://docs.google.com/document/d/1H2LePo4ThiBJZGYnwD0744TL5NDQb-xdSfyvEYaDWyU/edit#

! текст (задание) походу меняют для разных испытуемых.

Исходное задание:

База данных (**mongodb**):
Создать коллекцию в которой хранятся чеки:
- номер чека (int)
- номер кассы (int)
- дата и время чека (время на чеке)
- сумма чека
Создать коллекцию в которой хранятся кассы:
- номер кассы (int)
- часовой пояс кассы (можно int – отклонение от GMT) 
Создать 3 кассы (GMT-8, GMT 0, GMT+8)
Создать сервис очередей (RabbitMQ)
Через сервис очередей заполнить 365 дней тестовыми данными исходя из следующих условий:
- 400-800 чеков в день
- 80-150 сумма чека
- продажи идут с 6 до 22 местного времени
Бэк:
Сервер возвращает на фронт JSON
Все чеки отображаем по времени GMT+3
На фронте ajax – выводим в любом виде (без красоты) следующие страницы
 Шахматка – строки месяцы, столбцы кассы. На пересечении сумма чеков. 
 При нажатии на месяц – строки дни + дни недели, столбцы кассы. На пересечении сумма чеков.
 При нажатии на день – чеки этого дня.
 


**Описание, как делаем, как все работает:**

Для менеджера очередей используем RabbitMQ, для СУБД NoSQL MongoDB.
- Подымаем VPS, ставим Ubuntu, Apache, PHP, библиотеки для PHP.
- Подымаем RabbitMQ подключение в локалке (localhost) под пользователем quest.
- Подымаем MongoDB, открываем доступ для внешки (так удобно работать с любой машины), но! делаем отдельный логин, с доступом только в нашу базу, переменная для подключения к MongoDB хранится в файле **login_vars.php** здесь этот файл отсутствует не закачан,
(!) Без отдельного внешнего логина, за несколько дней базу угоняют и вымогают биткоины!
Пример, формат файла:
```
	$MongoDB_Login = "UserName:UserPassword@localhost:27017";
```

- Проверяем и убеждаемся что все сервисы подняты (RabbitMQ, Apache, PHP, MongoDB) и работают.
- В MongoDB создаем БД **TestSales**, создаем коллекции **RetailCollection** и **SalesCollection**.
- Для наполнения БД чеками, первым делом в CLI (в комнадной строке) запускаем consumer.php, запуск как  ```php consumer.php```. Consumer это приемка и обработка очереди чеков от RabbitMQ.
- После запуска consumer можно запускать генератор чеков, так же в CLI ```php cash.php 2019 1 1 America/Anchorage```

Параметры:```
	CLI: php cash.php Year ShopNumber CashNumber TimeZone
		Year:          2016 .. 2020, default 1
		ShopNumber:    1 .. 99, default 1
		CashNumber:      1 .. 99, default 1
		TiemZone: TiemZoneName (Linux Timezone ID), default "Europe/Samara"
		https://en.wikipedia.org/wiki/List_of_tz_database_time_zones
```

имеется исполняемый файл заготовок для закачки чеков в БД сразу за несколько лет, 2016, 2017, 2018, 2019 годы, занимает это несколько минут
файл **GenChecks.sh**


